<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
<style type="text/css">
* {
	margin:0;
	padding: 0;
	text-decoration: none;
	list-style: none;
}
body {
	padding:20px;
}
#container {
	width: 400px;
	height: 250px;
	border: 3px solid #333;
	overflow: hidden;
	position: absolute;
}
#list {
	width: 2400px;
	height: 250px;
	position: absolute;
	z-index: 1;
}
#list img {
	float:left;
	width: 400px;
	height: 250px;
}
#button {
	position: absolute;
	width: 100px;
	height: 10px;
	z-index: 2;
	bottom: 10px;
	left: 150px;
}
#button span {
	cursor: pointer;
	float: left;
	width: 10px;
	height: 10px;
	border-radius: 50%;
	background: #fff;
	margin-left: 12px;
}
#button .on {
	background: orangered;
}
.arrow {
	cursor: pointer;
	display: none;
	line-height: 39px;
	text-align: center;
	font-size: 36px;
	font-weight: bold;
	width: 40px;
	height: 40px;
	position: absolute;
	z-index: 2;
	top: 50%;
	margin-top: -20px;
	background-color: rgba(0,0,0,0.3);
	color: #fff;
}
.arrow:hover {
	background-color: rgba(0,0,0,0.7);
}
#container:hover .arrow {
	display: block;
}
#prev {
	left: 20px;
}
#next {
	right:20px;
}
</style>
<script type="text/javascript">
	window.onload = function () {
		//获取元素
		var container = document.getElementById('container');
		var list = document.getElementById('list');
		var btns = document.getElementById('button').getElementsByTagName('span');
		var prev = document.getElementById('prev');
		var next = document.getElementById('next');
		var timer;
		//关联按钮显示
		var index = 1;
		animated = false;
		function showBtn() {
			for(var i = 0; i < btns.length; i++){
				if(btns[i].className == "on") {
					btns[i].className = "";
					break;
				}
			}
			btns[index - 1].className = "on";
		}
		//绑定箭头事件
		function animate(offset) {
			animated = true;
			var newLeft = parseInt(list.style.left) + offset;
			var time = 300;//位移时间
			var interval = 10;//位移间隔时间
			var speed = offset/(time/interval);//每次的位移量

			function go() {
				if((speed < 0 && parseInt(list.style.left) > newLeft) || (speed > 0 && parseInt(list.style.left) < newLeft)) {
				    list.style.left = parseInt(list.style.left) + speed +'px';
				    setTimeout(go,interval); 
				}else {
					list.style.left = newLeft +"px";
					if(newLeft > -400) {
						list.style.left = "-1600px"
					}
					if(newLeft < -1600) {
						list.style.left = "-400px";
					}
					animated = false;
				}
			}
			go();
		}
		//自动播放
		function play() {
			timer = setInterval(function(){
				next.onclick();
			},3000)
		}
		function stop() {
			clearInterval(timer);
		}
		next.onclick = function () {
			if(animated) {
				return;
			}
			if(index == 4) {
				index = 1;
			}else {
				index += 1;
			}
			animate(-400);
			showBtn();
		}
		prev.onclick = function () {
			if(animated) {
				return;
			}
			if(index == 1) {
				index = 4;
			}else {
				index -= 1;
			}
			animate(400);
			showBtn();
		}
		for(var i = 0; i < btns.length; i++) {
			btns[i].onclick = function () {
				if(this.className == "on") {
					return;
				}
				var myIndex = parseInt(this.getAttribute('index'));
				var offset = -400 * (myIndex - index);
				if(!animated) {
					animate(offset);
				}
				index = myIndex;
				showBtn();
			}
		}
		container.onmouseover = stop;
		container.onmouseout = play;
		play();

	}
</script>

</head>
<body>
	<div id="container">
		<div id="list" style="left: -400px;">
			<img src="image/4" alt="">
			<img src="image/cn3.jpg" alt="">
			<img src="image/3.jpg" alt="">
			<img src="image/cn4.jpg" align="">
			<img src="image/4.jpg" alt="">
			<img src="image/cn3.jpg" alt="">
		</div>
		<div id="button">
			<span index="1" class="on"></span>
			<span index="2"></span>
			<span index="3"></span>
			<span index="4"></span>
		</div>
		<a href="javascript:;" id="prev" class="arrow">&lt;</a>
		<a href="javascript:;" id="next" class="arrow">&gt;</a>
	</div>
</body>
</html>